<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SlowHands</title>
    <!-- Codicons - VS Code's icon font -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@vscode/codicons@0.0.35/dist/codicon.css">
    <!-- Basic Reset -->
    <style>
        html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #ffffff; color: #1e1e1e; font-family: 'Segoe UI', system-ui, sans-serif; }
    </style>
    <!-- Critical loading styles -->
    <style>
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #ffffff;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        body.loading #loading-overlay {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        body.loading #app {
            display: none;
        }
    </style>
  </head>
  <body class="loading">
    <div id="loading-overlay">
        <div class="loading-hands">
            <svg class="hands-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <!-- Center dot -->
                <circle cx="50" cy="50" r="4" fill="#0078d4"/>
 
                <!-- Left hand palm -->
                <g class="hand left-hand">
                    <circle cx="20" cy="35" r="18" fill="#ffffff" stroke="#0078d4" stroke-width="3" stroke-linejoin="round"/>
                    <path d="M15 30 Q20 25 25 30" fill="none" stroke="#0078d4" stroke-width="2" stroke-linecap="round"/>
                </g>

                <!-- Right hand palm -->
                <g class="hand right-hand">
                    <circle cx="80" cy="35" r="18" fill="#ffffff" stroke="#0078d4" stroke-width="3" stroke-linejoin="round"/>
                    <path d="M75 30 Q80 25 85 30" fill="none" stroke="#0078d4" stroke-width="2" stroke-linecap="round"/>
                </g>
            </svg>
            <div class="loading-text">SlowHands is waking up...</div>
        </div>
    </div>
    <div id="app">
        <!-- Title Bar (Draggable) -->
        <div id="title-bar">
            <div class="title-bar-drag">
                <div class="app-icon">
                    <!-- Hand icon SVG -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 11.5a7.5 7.5 0 1 0-15 0 7.5 7.5 0 0 0 15 0Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M15 11.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" fill="currentColor"/>
                    </svg>
                </div>
                <div class="toolbar">
                    <!-- File Menu -->
                    <div class="menu-container">
                        <button class="toolbar-btn menu-trigger">File</button>
                        <div class="dropdown-menu">
                            <div class="menu-item"><i class="codicon codicon-new-file"></i> New File<span class="shortcut">Ctrl+N</span></div>
                            <div class="menu-item"><i class="codicon codicon-folder"></i> Open Folder<span class="shortcut">Ctrl+Shift+O</span></div>
                            <div class="menu-item"><i class="codicon codicon-go-to-file"></i> Open File<span class="shortcut">Ctrl+O</span></div>
                            <div class="menu-separator"></div>
                                            <div class="menu-item"><i class="codicon codicon-save"></i> Save<span class="shortcut">Ctrl+S</span></div>
                                            <div class="menu-item"><i class="codicon codicon-save-as"></i> Save As<span class="shortcut">Ctrl+Shift+S</span></div>
                                            <div class="menu-separator"></div>                            <div class="menu-item"><i class="codicon codicon-close"></i> Close File</div>
                        </div>
                    </div>
                    <!-- Edit Menu -->
                    <div class="menu-container">
                        <button class="toolbar-btn menu-trigger">Edit</button>
                        <div class="dropdown-menu">
                            <div class="menu-item"><i class="codicon codicon-discard"></i> Undo<span class="shortcut">Ctrl+Z</span></div>
                            <div class="menu-item"><i class="codicon codicon-redo"></i> Redo<span class="shortcut">Ctrl+Y</span></div>
                            <div class="menu-separator"></div>
                            <div class="menu-item"><i class="codicon codicon-clippy"></i> Copy<span class="shortcut">Ctrl+C</span></div>
                            <div class="menu-item"><i class="codicon codicon-paste"></i> Paste<span class="shortcut">Ctrl+V</span></div>
                            <div class="menu-item"><i class="codicon codicon-find"></i> Find<span class="shortcut">Ctrl+F</span></div>
                        </div>
                    </div>
                    <!-- View Menu -->
                    <div class="menu-container">
                        <button class="toolbar-btn menu-trigger">View</button>
                        <div class="dropdown-menu">
                            <div class="menu-item"><i class="codicon codicon-layout-sidebar-left"></i> Toggle Sidebar<span class="shortcut">Ctrl+B</span></div>
                            <div class="menu-item"><i class="codicon codicon-layout-panel"></i> Toggle Agent Panel<span class="shortcut">Ctrl+J</span></div>
                            <div class="menu-separator"></div>
                            <div class="menu-item"><i class="codicon codicon-zoom-in"></i> Zoom In<span class="shortcut">Ctrl++</span></div>
                            <div class="menu-item"><i class="codicon codicon-zoom-out"></i> Zoom Out<span class="shortcut">Ctrl+-</span></div>
                        </div>
                    </div>
                    <!-- Help Menu -->
                    <div class="menu-container">
                        <button class="toolbar-btn menu-trigger">Help</button>
                        <div class="dropdown-menu">
                            <div class="menu-item"><i class="codicon codicon-keyboard"></i> Keyboard Shortcuts</div>
                            <div class="menu-item"><i class="codicon codicon-book"></i> Documentation</div>
                            <div class="menu-separator"></div>
                            <div class="menu-item"><i class="codicon codicon-info"></i> About SlowHands</div>
                        </div>
                    </div>
                    <span class="toolbar-separator">|</span>
                    <button class="toolbar-btn" id="pause-btn" title="Pause/Resume streaming (Space)"><i class="codicon codicon-debug-pause"></i></button>
                    <button class="toolbar-btn" id="skip-btn" title="Skip to end (Escape)"><i class="codicon codicon-debug-step-over"></i></button>
                </div>
                <div class="app-title">SlowHands</div>
            </div>
            <div class="window-controls">
                <button class="win-btn minimize" id="minimize-btn"><i class="codicon codicon-chrome-minimize"></i></button>
                <button class="win-btn maximize" id="maximize-btn"><i class="codicon codicon-chrome-maximize"></i></button>
                <button class="win-btn close" id="close-btn"><i class="codicon codicon-chrome-close"></i></button>
            </div>
        </div>

        <!-- 1. Activity Bar (Leftmost) -->
        <div id="activity-bar">
            <div class="icon active" title="Explorer"><i class="codicon codicon-files"></i></div>
            <div class="icon custom-icon" title="Search">
                <svg class="calvin-binos" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <!-- Calvin's spiky hair -->
                    <path d="M 10 4 L 8 6 L 10 5 L 12 4 L 14 5 L 16 6 L 14 4 Z" fill="currentColor" stroke="none"/>
                    <path d="M 9 5 L 7 7 L 9 6 L 11 5 Z" fill="currentColor" stroke="none"/>
                    <path d="M 15 5 L 17 7 L 15 6 L 13 5 Z" fill="currentColor" stroke="none"/>
                    <!-- Calvin's head -->
                    <circle cx="12" cy="9" r="3.5" fill="none" stroke="currentColor" stroke-width="1.2"/>
                    <!-- Binoculars -->
                    <circle cx="7.5" cy="14" r="2.8" fill="none" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="16.5" cy="14" r="2.8" fill="none" stroke="currentColor" stroke-width="1.5"/>
                    <rect x="9.5" y="13" width="5" height="3.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                    <!-- Lens highlights -->
                    <circle cx="7.5" cy="13.5" r="0.8" fill="currentColor"/>
                    <circle cx="16.5" cy="13.5" r="0.8" fill="currentColor"/>
                    <!-- Handles -->
                    <line x1="4.5" y1="14" x2="7.5" y2="14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    <line x1="16.5" y1="14" x2="19.5" y2="14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="icon" title="Source Control"><i class="codicon codicon-source-control"></i></div>
            <div class="icon custom-icon" title="Debug">
                <svg class="antz-prohibited" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <!-- Prohibition circle -->
                    <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2"/>
                    <!-- ANTZ text (centered) -->
                    <text x="12" y="15" font-family="monospace, sans-serif" font-size="7" font-weight="bold" text-anchor="middle" fill="currentColor">ANTZ</text>
                    <!-- Diagonal slash (no smoking style) -->
                    <line x1="5" y1="5" x2="19" y2="19" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
            </div>
            <div class="icon custom-icon" title="Extensions">
                <svg class="hair-extensions" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <!-- Hair clip base (curved) -->
                    <path d="M 7 7 Q 12 5 17 7 L 17 11 Q 12 13 7 11 Z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
                    <!-- Hair clip teeth -->
                    <line x1="9.5" y1="8" x2="9.5" y2="10" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                    <line x1="12" y1="7.5" x2="12" y2="9.5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                    <line x1="14.5" y1="8" x2="14.5" y2="10" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
                    <!-- Long hair extensions hanging down -->
                    <path d="M 5 9 Q 6 12 7 15 Q 8 18 9 20" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <path d="M 6 10 Q 7 13 8 16 Q 9 19 10 21" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <path d="M 7 11 Q 8 14 9 17 Q 10 20 11 22" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <path d="M 17 9 Q 18 12 17 15 Q 16 18 15 20" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <path d="M 18 10 Q 17 13 16 16 Q 15 19 14 21" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <path d="M 17 11 Q 16 14 15 17 Q 14 20 13 22" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/>
                    <!-- Additional extension strands -->
                    <path d="M 8 10 Q 9 13 10 16" fill="none" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/>
                    <path d="M 16 10 Q 15 13 14 16" fill="none" stroke="currentColor" stroke-width="1.1" stroke-linecap="round"/>
                </svg>
            </div>
        </div>

        <!-- 2. Side Bar (Explorer) - Now resizable -->
        <div id="sidebar">
            <div class="sidebar-header">
                <i class="codicon codicon-folder"></i> EXPLORER
            </div>
            <div class="sidebar-content">
                <div class="file-item"><i class="codicon codicon-folder"></i> app</div>
                <div class="file-item indent"><i class="codicon codicon-folder"></i> src</div>
                <div class="file-item indent"><i class="codicon codicon-file-code"></i> agent.py</div>
                <div class="file-item indent"><i class="codicon codicon-file-code"></i> llm.py</div>
                <div class="file-item"><i class="codicon codicon-folder"></i> frontend</div>
                <div class="file-item indent"><i class="codicon codicon-file-code"></i> main.ts</div>
                <div class="file-item"><i class="codicon codicon-markdown"></i> README.md</div>
            </div>
            
            <!-- Agent Panel at bottom of sidebar (resizable) -->
            <div id="agent-panel">
                <div id="agent-resize-handle"></div>
                <div class="agent-header">
                    <i class="codicon codicon-robot"></i> AGENT
                    <div class="thinking-indicator" id="thinking-indicator">
                        <div class="spinner"></div>
                        <span>Thinking...</span>
                    </div>
                </div>
                <div id="agent-output">
                    <div class="output-line">Ready...</div>
                </div>
                <div class="agent-input-wrap">
                    <input type="text" id="agent-input" placeholder="Ask the agent..." />
                    <button id="agent-send" title="Send"><i class="codicon codicon-send"></i></button>
                    <button id="agent-stop" title="Stop agent"><i class="codicon codicon-debug-stop"></i></button>
                </div>
            </div>
        </div>

        <!-- Resize Handle -->
        <div id="resize-handle"></div>

        <!-- 3. Editor Area -->
        <div id="editor-area">
            <div id="tab-bar"></div>
            <div id="editor-container"></div>
        </div>

        <!-- 4. Status Bar -->
        <div id="status-bar">
            <div class="left">
                <span class="status-item" id="connection-status"><i class="codicon codicon-circle-outline"></i> Offline</span>
                <span class="status-item"><i class="codicon codicon-zap"></i> SlowHands</span>
            </div>
            <div class="right">
                <span class="status-item">Ln 1, Col 1</span>
                <span class="status-item">UTF-8</span>
                <span class="status-item"><i class="codicon codicon-sparkle"></i> Gemini</span>
            </div>
        </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
